<!DOCTYPE html>
<meta charset="utf-8">
<script type="text/javascript" src="../lib/d3.v5.min.js"></script>

<style type="text/css">
	/* Style the lines by removing the fill and applying a stroke */
	.line {
	    fill: none;
	    stroke: #ffab00;
	    stroke-width: 3;
	}
	  
	.overlay {
	  fill: none;
	  pointer-events: all;
	}

	/* Style the dots by assigning a fill and stroke */
	.dot {
	    fill: #ffab00;
	    stroke: #fff;
	}
	  
    .focus circle {
	  fill: none;
	  stroke: steelblue;
	}

</style>

<body>
	<div id="div1" class="svg-container"></div>
	<div id="div2" class="svg-container"></div>
	<div id="div3" class="svg-container"></div>
	<div id="div4" class="svg-container"></div>

	<script>

	    global_width = 1000,
	    global_height = 500;

	    // define the dimensions and margins for the graph
	    var margin = {top:100, right: 200, bottom: 50, left: 150}; 
	    var width = global_width - margin.left - margin.right, 
	        height = global_height - margin.top - margin.bottom; 


		//Appending first SVG element
		var svg1 = d3.select("div#div1")
					.append("svg")
					.attr('width', global_width)
					.attr('height', global_height)
					.append("g")
					.attr("transform", "translate(80,20)");

		//Set colors using schemeCategory10
		var colors = d3.schemeCategory10;

		d3.dsv(',', 'boardgame_ratings.csv', function(d){
			return{
				date: d3.timeParse("%Y-%m-%d")(d.date), //Parsing string to time obj
				Catan_count: +d['Catan=count'],
				Dominion_count: +d['Dominion=count'],
				Codenames_count: +d['Codenames=count'],
				Teraforming_Mars: +d['Terraforming Mars=count'],
				Gloomhaven_count: +d['Gloomhaven=count'],
				Magic_count: +d['Magic: The Gathering=count'],
				Dixit_count: +d['Dixit=count'],
				Monopoly_count: +d['Monopoly=count']

			}

			}).then(function(data){
			
					var timeFormatter = d3.timeFormat('%b %y') //format time

					var keys = ['Catan_count', 
								'Dominion_count', 
								'Codenames_count', 
								'Teraforming_Mars', 
								'Gloomhaven_count', 
								'Magic_count',
								'Dixit_count', 
								'Monopoly_count'],

						data_dict = {'Catan_count': [], 
								'Dominion_count': [], 
								'Codenames_count': [], 
								'Teraforming_Mars': [], 
								'Gloomhaven_count': [], 
								'Magic_count': [],
								'Dixit_count': [], 
								'Monopoly_count': []}
						
						all_values = [];

						for(i = 0; i < data.length; i++){
							for (j = 0; j < keys.length; j++){
								all_values.push(data[i][keys[j]])
								data_dict[keys[j]].push(data[i][keys[j]])
								
							}
						} 


					//Scales 
					const xScale = d3.scaleTime().range([0, width]),
						  yScale = d3.scaleLinear().rangeRound([height, 0]);

					xScale.domain(d3.extent(data, function(d){	
						return d.date})) // [Tue Nov 01 2016 00:00:00 GMT-0700 (Pacific Daylight Time), Sat Aug 01 2020 00:00:00 GMT-0700 (Pacific Daylight Time)]

					yScale.domain([(0), d3.max(all_values)]) // [0, "95775"]


					//Declare x-axis and y-axis
					var xAxis = d3.axisBottom(xScale)
							  .tickFormat(d3.timeFormat('%b %y')),

						yaxis = d3.axisLeft(yScale)
								  .ticks(10);
							
					//Append axes
					svg1.append('g')
						.attr('class', 'x axis')
						.attr("transform", "translate(0," + height + ")")
						.call(xAxis);

					svg1.append('g')
						.attr('class', 'y axis')
						.call(yaxis);

					//Lines
					var lines = [];

					var Catan_line = d3.line()
									   .x(function(d){return xScale(d.date)}) 
									   .y(function (d) {return yScale(d.Catan_count)})
									   .curve(d3.curveMonotoneX);

					lines.push(Catan_line);

					var Dominion_line = d3.line()
										  .x(function(d){return xScale(d.date)})
										  .y(function(d){return yScale(d.Dominion_count)})
										  .curve(d3.curveMonotoneX);

					
					lines.push(Dominion_line);

					var Codenames_line = d3.line()
										  .x(function(d){return xScale(d.date)})
										  .y(function(d){return yScale(d.Codenames_count)})
										  .curve(d3.curveMonotoneX);

					lines.push(Codenames_line)

					var Mars_line = d3.line()
									  .x(function(d){return xScale(d.date)})
									  .y(function(d){return yScale(d.Teraforming_Mars)})
									  .curve(d3.curveMonotoneX);

					lines.push(Mars_line);

					var Gloomhaven_line = d3.line()
											.x(function(d){return xScale(d.date)})
											.y(function(d){return yScale(d.Gloomhaven_count)})
											.curve(d3.curveMonotoneX);

					lines.push(Gloomhaven_line);

					var Magic_line = d3.line()
										.x(function(d){return xScale(d.date)})
										.y(function(d){return yScale(d.Magic_count)})
										.curve(d3.curveMonotoneX);

					lines.push(Magic_line);

					var Dixit_line = d3.line()
										.x(function(d){return xScale(d.date)})
										.y(function(d){return yScale(d.Dixit_count)})
										.curve(d3.curveMonotoneX);

					lines.push(Dixit_line);

					var Monopoly_line = d3.line()
										.x(function(d){return xScale(d.date)})
										.y(function(d){return yScale(d.Monopoly_count)})
										.curve(d3.curveMonotoneX)



					lines.push(Monopoly_line);


					
					//Add lines
					for (index = 0; index < lines.length; index++){
						svg1.append('path')
							.datum(data) //Binds data to the line 
							.style("stroke", colors[index]) //Color
							.attr('class', 'line') // Assign a class for styling 
							.attr('d', lines[index]) // Calls the line generator 
							
					}

					//Add legends 
					svg1.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width + 5)
						.attr('y', function(d){return yScale(d3.max(data_dict['Catan_count']))})
						.attr('fill', colors[0])
						.text('Catan')

					svg1.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Dominion_count']))})
						.attr('fill', colors[1])
						.text('Dominion')


					svg1.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Codenames_count']))})
						.attr('fill', colors[2])
						.text('Codenames')


					svg1.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Teraforming_Mars']))})
						.attr('fill', colors[3])
						.text('Terraforming Mars')


					svg1.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Gloomhaven_count']))})
						.attr('fill', colors[4])
						.text('Gloomhaven')

					svg1.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Magic_count']))})
						.attr('fill', colors[5])
						.text('Magic: The Gathering')

					svg1.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Dixit_count']))})
						.attr('fill', colors[6])
						.text('Dixit')

					svg1.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Monopoly_count']))})
						.attr('fill', colors[7])
						.text('Monopoly')


				// Add the text label for axes     
				svg1.append("g")
				   .append('text')
				   .attr('id', 'x_axis_label')
				   .attr("x", width/2)
				   .attr('y', height+ 50)
				   .attr("text-anchor", "middle")
				   .attr("stroke", "black")
				   .text("Month");

			
			   svg1.append("g")
			     .append('text')
			     .attr('id', 'y_axis_label')
			     .attr("transform", "rotate(-90)")
			     .attr("x", -height/2)
			     .attr("y", 25)
			     .attr("dy", "-5.1em")
			     .attr("text-anchor", "end")
			     .attr("stroke", "black")
			     .text("Number of Ratings");


				//Chart Title 
				svg1.append('g')
				   .append('text')
				   .attr('id', 'title')
				   .attr("x", width/3)
				   .attr('y', height-355)
				   .attr("stroke", "black")
				   .text("Number of Ratings 2016 - 2020");


				})
				
	</script>
	
	<div class = "pagebreak"> </div>

	<script> 
		  	global_width = 1000,
		    global_height = 500;

		    // Dimensions
		    var margin = {top:100, right: 200, bottom: 50, left: 150}; 
		    var width = global_width - margin.left - margin.right, 
		        height = global_height - margin.top - margin.bottom; 


			//Appending second SVG element
			var svg2 = d3.select("div#div2")
							.append("svg")
							.attr('width', global_width)
							.attr('height', global_height)
							.append("g")
							.attr("transform", "translate(80,20)");

			//Set colors using schemeCategory10
			var colors = d3.schemeCategory10;

			d3.dsv(',', 'boardgame_ratings.csv', function(d){
				return{
					date: d3.timeParse("%Y-%m-%d")(d.date), //Parsing string to time obj
					Catan_count: +d['Catan=count'],
					Dominion_count: +d['Dominion=count'],
					Codenames_count: +d['Codenames=count'],
					Teraforming_Mars: +d['Terraforming Mars=count'],
					Gloomhaven_count: +d['Gloomhaven=count'],
					Magic_count: +d['Magic: The Gathering=count'],
					Dixit_count: +d['Dixit=count'],
					Monopoly_count: +d['Monopoly=count'],

					Catan_rank : +d['Catan=rank'],
					Codenames_rank : +d['Codenames=rank'],
					Mars_rank : +d['Terraforming Mars=rank'],
					Gloomhaven_rank : +d['Gloomhaven=rank']


				}

				}).then(function(data){

					var timeFormatter = d3.timeFormat('%b %y') //format time

					var keys = ['Catan_count', 
								'Dominion_count', 
								'Codenames_count', 
								'Teraforming_Mars', 
								'Gloomhaven_count', 
								'Magic_count',
								'Dixit_count', 
								'Monopoly_count'],

						data_dict = {'Catan_count': [], 
								'Dominion_count': [], 
								'Codenames_count': [], 
								'Teraforming_Mars': [], 
								'Gloomhaven_count': [], 
								'Magic_count': [],
								'Dixit_count': [], 
								'Monopoly_count': []}
						
						all_values = [];

						for(i = 0; i < data.length; i++){
							for (j = 0; j < keys.length; j++){
								all_values.push(data[i][keys[j]])
								data_dict[keys[j]].push(data[i][keys[j]])
								
							}
						} 

						console.log(data_dict)


					//Scales 
					const xScale = d3.scaleTime().range([0, width]),
						  yScale = d3.scaleLinear().rangeRound([height, 0]);

					xScale.domain(d3.extent(data, function(d){	
						return d.date})) // [Tue Nov 01 2016 00:00:00 GMT-0700 (Pacific Daylight Time), Sat Aug 01 2020 00:00:00 GMT-0700 (Pacific Daylight Time)]

					yScale.domain([(0), d3.max(all_values)]) // [0, "95775"]


					//Declare x-axis and y-axis
					var xAxis = d3.axisBottom(xScale)
							  .tickFormat(d3.timeFormat('%b %y')),

						yaxis = d3.axisLeft(yScale)
								  .ticks(10);
							
					//Append axes
					svg2.append('g')
						.attr('class', 'x axis')
						.attr("transform", "translate(0," + height + ")")
						.call(xAxis);

					svg2.append('g')
						.attr('class', 'y axis')
						.call(yaxis);


					//Lines
					var lines = [];

					var Catan_line = d3.line()
									   .x(function(d){return xScale(d.date)}) 
									   .y(function (d) {return yScale(d.Catan_count)})
									   .curve(d3.curveMonotoneX);

					lines.push(Catan_line);

					var Dominion_line = d3.line()
										  .x(function(d){return xScale(d.date)})
										  .y(function(d){return yScale(d.Dominion_count)})
										  .curve(d3.curveMonotoneX);

					
					lines.push(Dominion_line);

					var Codenames_line = d3.line()
										  .x(function(d){return xScale(d.date)})
										  .y(function(d){return yScale(d.Codenames_count)})
										  .curve(d3.curveMonotoneX);

					lines.push(Codenames_line)

					var Mars_line = d3.line()
									  .x(function(d){return xScale(d.date)})
									  .y(function(d){return yScale(d.Teraforming_Mars)})
									  .curve(d3.curveMonotoneX);

					lines.push(Mars_line);

					var Gloomhaven_line = d3.line()
											.x(function(d){return xScale(d.date)})
											.y(function(d){return yScale(d.Gloomhaven_count)})
											.curve(d3.curveMonotoneX);

					lines.push(Gloomhaven_line);

					var Magic_line = d3.line()
										.x(function(d){return xScale(d.date)})
										.y(function(d){return yScale(d.Magic_count)})
										.curve(d3.curveMonotoneX);

					lines.push(Magic_line);

					var Dixit_line = d3.line()
										.x(function(d){return xScale(d.date)})
										.y(function(d){return yScale(d.Dixit_count)})
										.curve(d3.curveMonotoneX);

					lines.push(Dixit_line);

					var Monopoly_line = d3.line()
										.x(function(d){return xScale(d.date)})
										.y(function(d){return yScale(d.Monopoly_count)})
										.curve(d3.curveMonotoneX);


					lines.push(Monopoly_line);


					//Add lines
					for (index = 0; index < lines.length; index++){
						svg2.append('path')
							.datum(data)
							.style("stroke", colors[index])
							.attr('class', 'line')
							.attr('d', lines[index])
							
					}


					//Collect Data for every third month
					scaled_data = []
					for(i = 0; i< data.length; i++){
						if((i+1) % 3 == 0){
							scaled_data.push(data[i])
						}
						
					}
					
					//Add symbols 
					svg2.selectAll(".dots")
				    .data(scaled_data)
				    .enter()
				    .append("circle")
				    	.style("fill", colors[0])
				    	.attr("class", "dot")
				    	.attr('cx', function(d){return xScale(d.date)})
				    	.attr('cy', function(d){return yScale(d.Catan_count)})
				    	.attr("r", 10)

				    		

				   	svg2.selectAll(".dots")
				       .data(scaled_data)
				       .enter()
				       .append("circle")
				       	.style("fill", colors[2])
				       	.attr("class", "dot")
				       	.attr('cx', function(d){return xScale(d.date)})
				       	.attr('cy', function(d){return yScale(d.Codenames_count)})
				       	.attr("r", 10)


				   	svg2.selectAll(".dots")
				       .data(scaled_data)
				       .enter()
				       .append("circle")
				       	.style("fill", colors[3])
				       	.attr("class", "dot")
				       	.attr('cx', function(d){return xScale(d.date)})
				       	.attr('cy', function(d){return yScale(d.Teraforming_Mars)})
				       	.attr("r", 10) 


			    	svg2.selectAll(".dots")
			        .data(scaled_data)
			        .enter()
			        .append("circle")
			        	.style("fill", colors[4])
			        	.attr("class", "dot")
			        	.attr('cx', function(d){return xScale(d.date)})
			        	.attr('cy', function(d){return yScale(d.Gloomhaven_count)})
			        	.attr("r", 10) 
				

			        //Add rank text
			       	svg2.append('g')
			       		.selectAll('circle')
			       		.data(scaled_data)
			       		.enter()
			       		.append('text')
			       			.attr('class', 'circle_text')
			       			.attr('x', function(d){return + xScale(d.date) - 8 })
			       			.attr('y', function(d){return yScale(d.Catan_count) +2 })
			    	   		.text(function(d){
			    	   			return d.Catan_rank
			    	   		})
			    	   		.style('font-size', '10px')
			    	   		.attr('fill', 'white')


			       	svg2.append('g')
			       		.selectAll('circle')
			       		.data(scaled_data)
			       		.enter()
			       		.append('text')
			       			.attr('class', 'circle_text')
			       			.attr('x', function(d){return + xScale(d.date) - 6 })
			       			.attr('y', function(d){return yScale(d.Codenames_count) +2 })
			    	   		.text(function(d){
			    	   			return d.Codenames_rank
			    	   		})
			    	   		.style('font-size', '10px')
			    	   		.attr('fill', 'white')


			       	svg2.append('g')
			       		.selectAll('circle')
			       		.data(scaled_data)
			       		.enter()
			       		.append('text')
			       			.attr('class', 'circle_text')
			       			.attr('x', function(d){return xScale(d.date)- 2})
			       			.attr('y', function(d){return yScale(d.Teraforming_Mars) +2 })
			    	   		.text(function(d){
			    	   			return d.Mars_rank
			    	   		})
			    	   		.style('font-size', '10px')
			    	   		.attr('fill', 'white')



			       	svg2.append('g')
			       		.selectAll('circle')
			       		.data(scaled_data)
			       		.enter()
			       		.append('text')
			       			.attr('class', 'circle_text')
			       			.attr('x', function(d){return xScale(d.date)- 7})
			       			.attr('y', function(d){return yScale(d.Gloomhaven_count) +2 })
			    	   		.text(function(d){
			    	   			return d.Gloomhaven_rank
			    	   		})
			    	   		.style('font-size', '8px')
			    	   		.attr('fill', 'white')


			    	//Add Ranks Legend
			    	svg2.append('circle')
			    	   .attr('cx', width + 65)
			    	   .attr('cy', height - 20)
			    	   .attr('r', 25)
			    	   .attr('stroke', 'black')
			    	   .attr('fill', 'black')


				    svg2.append('text')
				    	.attr('class', 'Rank legend')
				    	.attr('x', width + 51)
				    	.attr('y', height - 15)
				    	.attr('fill', 'white')
				    	.text('rank')


				    svg2.append('text')
				    	.attr('class', 'Rank legend')
				    	.attr('x', width + 22)
				    	.attr('y', height + 20)
				    	.attr('fill', 'black')
				    	.text('BoardGameGeek Rank')

					//Add legends 
					svg2.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width + 5)
						.attr('y', function(d){return yScale(d3.max(data_dict['Catan_count']))})
						.attr('fill', colors[0])
						.text('Catan')

					svg2.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Dominion_count']))})
						.attr('fill', colors[1])
						.text('Dominion')


					svg2.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Codenames_count']))})
						.attr('fill', colors[2])
						.text('Codenames')


					svg2.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Teraforming_Mars']))})
						.attr('fill', colors[3])
						.text('Terraforming Mars')


					svg2.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Gloomhaven_count']))})
						.attr('fill', colors[4])
						.text('Gloomhaven')

					svg2.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Magic_count']))})
						.attr('fill', colors[5])
						.text('Magic: The Gathering')

					svg2.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Dixit_count']))})
						.attr('fill', colors[6])
						.text('Dixit')

					svg2.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Monopoly_count']))})
						.attr('fill', colors[7])
						.text('Monopoly')


			   	// Add the text label for axes     
			   	svg2.append("g")
			   	   .append('text')
			   	   .attr('id', 'x_axis_label')
			   	   .attr("x", width/2)
			   	   .attr('y', height+ 50)
			   	   .attr("text-anchor", "middle")
			   	   .attr("stroke", "black")
			   	   .text("Month");

			   
			      svg2.append("g")
			        .append('text')
			        .attr('id', 'y_axis_label')
			        .attr("transform", "rotate(-90)")
			        .attr("x", -height/2)
			        .attr("y", 25)
			        .attr("dy", "-5.1em")
			        .attr("text-anchor", "end")
			        .attr("stroke", "black")
			        .text("Number of Ratings");

					//Chart Title 
					svg2.append('g')
					   .append('text')
					   .attr('id', 'title')
					   .attr("x", width/4)
					   .attr('y', height-355)
					   .attr("stroke", "black")
					   .text("Number of Ratings 2016 - 2020 with Rankings");


					
				})

	
	</script>

	<div class="pagebreak"></div>

	<script>
		  	global_width = 1000,
		    global_height = 500;

		    // Dimensions
		    var margin = {top:100, right: 200, bottom: 50, left: 150}; 
		    var width = global_width - margin.left - margin.right, 
		        height = global_height - margin.top - margin.bottom; 


			//Appending second SVG element
			var svg3 = d3.select("div#div2")
							.append("svg")
							.attr('width', global_width)
							.attr('height', global_height)
							.append("g")
							.attr("transform", "translate(80,20)");

			//Set colors using schemeCategory10
			var colors = d3.schemeCategory10;

			d3.dsv(',', 'boardgame_ratings.csv', function(d){
				return{
					date: d3.timeParse("%Y-%m-%d")(d.date), //Parsing string to time obj
					Catan_count: +d['Catan=count'],
					Dominion_count: +d['Dominion=count'],
					Codenames_count: +d['Codenames=count'],
					Teraforming_Mars: +d['Terraforming Mars=count'],
					Gloomhaven_count: +d['Gloomhaven=count'],
					Magic_count: +d['Magic: The Gathering=count'],
					Dixit_count: +d['Dixit=count'],
					Monopoly_count: +d['Monopoly=count'],

					Catan_rank : +d['Catan=rank'],
					Codenames_rank : +d['Codenames=rank'],
					Mars_rank : +d['Terraforming Mars=rank'],
					Gloomhaven_rank : +d['Gloomhaven=rank']


				}

				}).then(function(data){

					var timeFormatter = d3.timeFormat('%b %y') //format time

					var keys = ['Catan_count', 
								'Dominion_count', 
								'Codenames_count', 
								'Teraforming_Mars', 
								'Gloomhaven_count', 
								'Magic_count',
								'Dixit_count', 
								'Monopoly_count'],

						data_dict = {'Catan_count': [], 
								'Dominion_count': [], 
								'Codenames_count': [], 
								'Teraforming_Mars': [], 
								'Gloomhaven_count': [], 
								'Magic_count': [],
								'Dixit_count': [], 
								'Monopoly_count': []}
						
						all_values = [];

						for(i = 0; i < data.length; i++){
							for (j = 0; j < keys.length; j++){
								all_values.push(data[i][keys[j]])
								data_dict[keys[j]].push(data[i][keys[j]])
								
							}
						} 

						console.log(data_dict)


					//Scales 
					const xScale = d3.scaleTime().range([0, width]),
						  yScale = d3.scaleSqrt().rangeRound([height, 0]);

					xScale.domain(d3.extent(data, function(d){	
						return d.date})) // [Tue Nov 01 2016 00:00:00 GMT-0700 (Pacific Daylight Time), Sat Aug 01 2020 00:00:00 GMT-0700 (Pacific Daylight Time)]

					yScale.domain([(0), d3.max(all_values)]) // [0, "95775"]


					//Declare x-axis and y-axis
					var xAxis = d3.axisBottom(xScale)
							  .tickFormat(d3.timeFormat('%b %y')),

						yaxis = d3.axisLeft(yScale)
								  .ticks(10);
							
					//Append axes
					svg3.append('g')
						.attr('class', 'x axis')
						.attr("transform", "translate(0," + height + ")")
						.call(xAxis);

					svg3.append('g')
						.attr('class', 'y axis')
						.call(yaxis);


					//Lines
					var lines = [];

					var Catan_line = d3.line()
									   .x(function(d){return xScale(d.date)}) 
									   .y(function (d) {return yScale(d.Catan_count)})
									   .curve(d3.curveMonotoneX);

					lines.push(Catan_line);

					var Dominion_line = d3.line()
										  .x(function(d){return xScale(d.date)})
										  .y(function(d){return yScale(d.Dominion_count)})
										  .curve(d3.curveMonotoneX);

					
					lines.push(Dominion_line);

					var Codenames_line = d3.line()
										  .x(function(d){return xScale(d.date)})
										  .y(function(d){return yScale(d.Codenames_count)})
										  .curve(d3.curveMonotoneX);

					lines.push(Codenames_line)

					var Mars_line = d3.line()
									  .x(function(d){return xScale(d.date)})
									  .y(function(d){return yScale(d.Teraforming_Mars)})
									  .curve(d3.curveMonotoneX);

					lines.push(Mars_line);

					var Gloomhaven_line = d3.line()
											.x(function(d){return xScale(d.date)})
											.y(function(d){return yScale(d.Gloomhaven_count)})
											.curve(d3.curveMonotoneX);

					lines.push(Gloomhaven_line);

					var Magic_line = d3.line()
										.x(function(d){return xScale(d.date)})
										.y(function(d){return yScale(d.Magic_count)})
										.curve(d3.curveMonotoneX);

					lines.push(Magic_line);

					var Dixit_line = d3.line()
										.x(function(d){return xScale(d.date)})
										.y(function(d){return yScale(d.Dixit_count)})
										.curve(d3.curveMonotoneX);

					lines.push(Dixit_line);

					var Monopoly_line = d3.line()
										.x(function(d){return xScale(d.date)})
										.y(function(d){return yScale(d.Monopoly_count)})
										.curve(d3.curveMonotoneX);


					lines.push(Monopoly_line);


					//Add lines
					for (index = 0; index < lines.length; index++){
						svg3.append('path')
							.datum(data)
							.style("stroke", colors[index])
							.attr('class', 'line')
							.attr('d', lines[index])
							
					}


					//Collect Data for every third month
					scaled_data = []
					for(i = 0; i< data.length; i++){
						if((i+1) % 3 == 0){
							scaled_data.push(data[i])
						}
						
					}
					
					//Add symbols 
					svg3.selectAll(".dots")
				    .data(scaled_data)
				    .enter()
				    .append("circle")
				    	.style("fill", colors[0])
				    	.attr("class", "dot")
				    	.attr('cx', function(d){return xScale(d.date)})
				    	.attr('cy', function(d){return yScale(d.Catan_count)})
				    	.attr("r", 10)

				    		

				   	svg3.selectAll(".dots")
				       .data(scaled_data)
				       .enter()
				       .append("circle")
				       	.style("fill", colors[2])
				       	.attr("class", "dot")
				       	.attr('cx', function(d){return xScale(d.date)})
				       	.attr('cy', function(d){return yScale(d.Codenames_count)})
				       	.attr("r", 10)


				   	svg3.selectAll(".dots")
				       .data(scaled_data)
				       .enter()
				       .append("circle")
				       	.style("fill", colors[3])
				       	.attr("class", "dot")
				       	.attr('cx', function(d){return xScale(d.date)})
				       	.attr('cy', function(d){return yScale(d.Teraforming_Mars)})
				       	.attr("r", 10) 


			    	svg3.selectAll(".dots")
			        .data(scaled_data)
			        .enter()
			        .append("circle")
			        	.style("fill", colors[4])
			        	.attr("class", "dot")
			        	.attr('cx', function(d){return xScale(d.date)})
			        	.attr('cy', function(d){return yScale(d.Gloomhaven_count)})
			        	.attr("r", 10) 
				

			        //Add rank text
			       	svg3.append('g')
			       		.selectAll('circle')
			       		.data(scaled_data)
			       		.enter()
			       		.append('text')
			       			.attr('class', 'circle_text')
			       			.attr('x', function(d){return + xScale(d.date) - 8 })
			       			.attr('y', function(d){return yScale(d.Catan_count) +2 })
			    	   		.text(function(d){
			    	   			return d.Catan_rank
			    	   		})
			    	   		.style('font-size', '10px')
			    	   		.attr('fill', 'white')


			       	svg3.append('g')
			       		.selectAll('circle')
			       		.data(scaled_data)
			       		.enter()
			       		.append('text')
			       			.attr('class', 'circle_text')
			       			.attr('x', function(d){return + xScale(d.date) - 6 })
			       			.attr('y', function(d){return yScale(d.Codenames_count) +2 })
			    	   		.text(function(d){
			    	   			return d.Codenames_rank
			    	   		})
			    	   		.style('font-size', '10px')
			    	   		.attr('fill', 'white')


			       	svg3.append('g')
			       		.selectAll('circle')
			       		.data(scaled_data)
			       		.enter()
			       		.append('text')
			       			.attr('class', 'circle_text')
			       			.attr('x', function(d){return xScale(d.date)- 2})
			       			.attr('y', function(d){return yScale(d.Teraforming_Mars) +2 })
			    	   		.text(function(d){
			    	   			return d.Mars_rank
			    	   		})
			    	   		.style('font-size', '10px')
			    	   		.attr('fill', 'white')



			       	svg3.append('g')
			       		.selectAll('circle')
			       		.data(scaled_data)
			       		.enter()
			       		.append('text')
			       			.attr('class', 'circle_text')
			       			.attr('x', function(d){return xScale(d.date)- 7})
			       			.attr('y', function(d){return yScale(d.Gloomhaven_count) +2 })
			    	   		.text(function(d){
			    	   			return d.Gloomhaven_rank
			    	   		})
			    	   		.style('font-size', '8px')
			    	   		.attr('fill', 'white')


			    	//Add Ranks Legend
			    	svg3.append('circle')
			    	   .attr('cx', width + 65)
			    	   .attr('cy', height - 20)
			    	   .attr('r', 25)
			    	   .attr('stroke', 'black')
			    	   .attr('fill', 'black')


				    svg3.append('text')
				    	.attr('class', 'Rank legend')
				    	.attr('x', width + 51)
				    	.attr('y', height - 15)
				    	.attr('fill', 'white')
				    	.text('rank')


				    svg3.append('text')
				    	.attr('class', 'Rank legend')
				    	.attr('x', width + 22)
				    	.attr('y', height + 20)
				    	.attr('fill', 'black')
				    	.text('BoardGameGeek Rank')

					//Add legends 
					svg3.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width + 5)
						.attr('y', function(d){return yScale(d3.max(data_dict['Catan_count']))})
						.attr('fill', colors[0])
						.text('Catan')

					svg3.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Dominion_count']))})
						.attr('fill', colors[1])
						.text('Dominion')


					svg3.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Codenames_count']))})
						.attr('fill', colors[2])
						.text('Codenames')


					svg3.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Teraforming_Mars']))})
						.attr('fill', colors[3])
						.text('Terraforming Mars')


					svg3.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Gloomhaven_count']))})
						.attr('fill', colors[4])
						.text('Gloomhaven')

					svg3.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Magic_count']))})
						.attr('fill', colors[5])
						.text('Magic: The Gathering')

					svg3.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Dixit_count']))})
						.attr('fill', colors[6])
						.text('Dixit')

					svg3.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Monopoly_count']))})
						.attr('fill', colors[7])
						.text('Monopoly')


					// Add the text label for axes     
					svg3.append("g")
					   .append('text')
					   .attr('id', 'x_axis_label')
					   .attr("x", width/2)
					   .attr('y', height+ 50)
					   .attr("text-anchor", "middle")
					   .attr("stroke", "black")
					   .text("Month");

				
				   svg3.append("g")
				     .append('text')
				     .attr('id', 'y_axis_label')
				     .attr("transform", "rotate(-90)")
				     .attr("x", -height/2)
				     .attr("y", 25)
				     .attr("dy", "-5.1em")
				     .attr("text-anchor", "end")
				     .attr("stroke", "black")
				     .text("Number of Ratings");

					//Chart Title 
					svg3.append('g')
					   .append('text')
					   .attr('id', 'title')
					   .attr("x", width/4)
					   .attr('y', height-355)
					   .attr("stroke", "black")
					   .text("Number of Ratings 2016 - 2020 (Square root Scale)");


					
				})

		
	</script>

	<div class = "pagebreak"> </div>

	<script>
		
		  	global_width = 1000,
		    global_height = 500;

		    // Dimensions
		    var margin = {top:100, right: 200, bottom: 50, left: 150}; 
		    var width = global_width - margin.left - margin.right, 
		        height = global_height - margin.top - margin.bottom; 


			//Appending second SVG element
			var svg4 = d3.select("div#div2")
							.append("svg")
							.attr('width', global_width)
							.attr('height', global_height)
							.append("g")
							.attr("transform", "translate(80,20)");

			//Set colors using schemeCategory10
			var colors = d3.schemeCategory10;

			d3.dsv(',', 'boardgame_ratings.csv', function(d){
				return{
					date: d3.timeParse("%Y-%m-%d")(d.date), //Parsing string to time obj
					Catan_count: +d['Catan=count'],
					Dominion_count: +d['Dominion=count'],
					Codenames_count: +d['Codenames=count'],
					Teraforming_Mars: +d['Terraforming Mars=count'],
					Gloomhaven_count: +d['Gloomhaven=count'],
					Magic_count: +d['Magic: The Gathering=count'],
					Dixit_count: +d['Dixit=count'],
					Monopoly_count: +d['Monopoly=count'],

					Catan_rank : +d['Catan=rank'],
					Codenames_rank : +d['Codenames=rank'],
					Mars_rank : +d['Terraforming Mars=rank'],
					Gloomhaven_rank : +d['Gloomhaven=rank']


				}

				}).then(function(data){

					var timeFormatter = d3.timeFormat('%b %y') //format time

					var keys = ['Catan_count', 
								'Dominion_count', 
								'Codenames_count', 
								'Teraforming_Mars', 
								'Gloomhaven_count', 
								'Magic_count',
								'Dixit_count', 
								'Monopoly_count'],

						data_dict = {'Catan_count': [], 
								'Dominion_count': [], 
								'Codenames_count': [], 
								'Teraforming_Mars': [], 
								'Gloomhaven_count': [], 
								'Magic_count': [],
								'Dixit_count': [], 
								'Monopoly_count': []}
						
						all_values = [];

						for(i = 0; i < data.length; i++){
							for (j = 0; j < keys.length; j++){
								all_values.push(data[i][keys[j]])
								data_dict[keys[j]].push(data[i][keys[j]])
								
							}
						} 

						console.log(data_dict)


					//Scales 
					const xScale = d3.scaleTime().range([0, width]),
						  yScale = d3.scaleLog().rangeRound([height, 0]);

					xScale.domain(d3.extent(data, function(d){	
						return d.date})) // [Tue Nov 01 2016 00:00:00 GMT-0700 (Pacific Daylight Time), Sat Aug 01 2020 00:00:00 GMT-0700 (Pacific Daylight Time)]

					yScale.domain([1, 100000]) 


					//Declare x-axis and y-axis
					var xAxis = d3.axisBottom(xScale)
							  .tickFormat(d3.timeFormat('%b %y')),

						yaxis = d3.axisLeft(yScale)
								  .ticks(10);
							
					//Append axes
					svg4.append('g')
						.attr('class', 'x axis')
						.attr("transform", "translate(0," + height + ")")
						.call(xAxis);

					svg4.append('g')
						.attr('class', 'y axis')
						.call(yaxis);


					//Lines
					var lines = [];

					var Catan_line = d3.line()
									   .x(function(d){return xScale(d.date)}) 
									   .y(function (d) {return yScale(d.Catan_count)})
									   .curve(d3.curveMonotoneX);

					lines.push(Catan_line);

					var Dominion_line = d3.line()
										  .x(function(d){return xScale(d.date)})
										  .y(function(d){return yScale(d.Dominion_count)})
										  .curve(d3.curveMonotoneX);

					
					lines.push(Dominion_line);

					var Codenames_line = d3.line()
										  .x(function(d){return xScale(d.date)})
										  .y(function(d){return yScale(d.Codenames_count)})
										  .curve(d3.curveMonotoneX);

					lines.push(Codenames_line)

					var Mars_line = d3.line()
									  .x(function(d){return xScale(d.date)})
									  .y(function(d){return yScale(d.Teraforming_Mars)})
									  .curve(d3.curveMonotoneX);

					lines.push(Mars_line);

					var Gloomhaven_line = d3.line()
											.x(function(d){return xScale(d.date)})
											.y(function(d){return yScale(d.Gloomhaven_count)})
											.curve(d3.curveMonotoneX);

					lines.push(Gloomhaven_line);

					var Magic_line = d3.line()
										.x(function(d){return xScale(d.date)})
										.y(function(d){return yScale(d.Magic_count)})
										.curve(d3.curveMonotoneX);

					lines.push(Magic_line);

					var Dixit_line = d3.line()
										.x(function(d){return xScale(d.date)})
										.y(function(d){return yScale(d.Dixit_count)})
										.curve(d3.curveMonotoneX);

					lines.push(Dixit_line);

					var Monopoly_line = d3.line()
										.x(function(d){return xScale(d.date)})
										.y(function(d){return yScale(d.Monopoly_count)})
										.curve(d3.curveMonotoneX);


					lines.push(Monopoly_line);


					//Add lines
					for (index = 0; index < lines.length; index++){
						svg4.append('path')
							.datum(data)
							.style("stroke", colors[index])
							.attr('class', 'line')
							.attr('d', lines[index])
							
					}


					//Collect Data for every third month
					scaled_data = []
					for(i = 0; i< data.length; i++){
						if((i+1) % 3 == 0){
							scaled_data.push(data[i])
						}
						
					}
					
					//Add symbols 
					svg4.selectAll(".dots")
				    .data(scaled_data)
				    .enter()
				    .append("circle")
				    	.style("fill", colors[0])
				    	.attr("class", "dot")
				    	.attr('cx', function(d){return xScale(d.date)})
				    	.attr('cy', function(d){return yScale(d.Catan_count)})
				    	.attr("r", 10)

				    		

				   	svg4.selectAll(".dots")
				       .data(scaled_data)
				       .enter()
				       .append("circle")
				       	.style("fill", colors[2])
				       	.attr("class", "dot")
				       	.attr('cx', function(d){return xScale(d.date)})
				       	.attr('cy', function(d){return yScale(d.Codenames_count)})
				       	.attr("r", 10)


				   	svg4.selectAll(".dots")
				       .data(scaled_data)
				       .enter()
				       .append("circle")
				       	.style("fill", colors[3])
				       	.attr("class", "dot")
				       	.attr('cx', function(d){return xScale(d.date)})
				       	.attr('cy', function(d){return yScale(d.Teraforming_Mars)})
				       	.attr("r", 10) 


			    	svg4.selectAll(".dots")
			        .data(scaled_data)
			        .enter()
			        .append("circle")
			        	.style("fill", colors[4])
			        	.attr("class", "dot")
			        	.attr('cx', function(d){return xScale(d.date)})
			        	.attr('cy', function(d){return yScale(d.Gloomhaven_count)})
			        	.attr("r", 10) 
				

			        //Add rank text
			       	svg4.append('g')
			       		.selectAll('circle')
			       		.data(scaled_data)
			       		.enter()
			       		.append('text')
			       			.attr('class', 'circle_text')
			       			.attr('x', function(d){return + xScale(d.date) - 8 })
			       			.attr('y', function(d){return yScale(d.Catan_count) +2 })
			    	   		.text(function(d){
			    	   			return d.Catan_rank
			    	   		})
			    	   		.style('font-size', '10px')
			    	   		.attr('fill', 'white')


			       	svg4.append('g')
			       		.selectAll('circle')
			       		.data(scaled_data)
			       		.enter()
			       		.append('text')
			       			.attr('class', 'circle_text')
			       			.attr('x', function(d){return + xScale(d.date) - 6 })
			       			.attr('y', function(d){return yScale(d.Codenames_count) +2 })
			    	   		.text(function(d){
			    	   			return d.Codenames_rank
			    	   		})
			    	   		.style('font-size', '10px')
			    	   		.attr('fill', 'white')


			       	svg4.append('g')
			       		.selectAll('circle')
			       		.data(scaled_data)
			       		.enter()
			       		.append('text')
			       			.attr('class', 'circle_text')
			       			.attr('x', function(d){return xScale(d.date)- 2})
			       			.attr('y', function(d){return yScale(d.Teraforming_Mars) +2 })
			    	   		.text(function(d){
			    	   			return d.Mars_rank
			    	   		})
			    	   		.style('font-size', '10px')
			    	   		.attr('fill', 'white')



			       	svg4.append('g')
			       		.selectAll('circle')
			       		.data(scaled_data)
			       		.enter()
			       		.append('text')
			       			.attr('class', 'circle_text')
			       			.attr('x', function(d){return xScale(d.date)- 7})
			       			.attr('y', function(d){return yScale(d.Gloomhaven_count) +2 })
			    	   		.text(function(d){
			    	   			return d.Gloomhaven_rank
			    	   		})
			    	   		.style('font-size', '8px')
			    	   		.attr('fill', 'white')


			    	//Add Ranks Legend
			    	svg4.append('circle')
			    	   .attr('cx', width + 65)
			    	   .attr('cy', height - 20)
			    	   .attr('r', 25)
			    	   .attr('stroke', 'black')
			    	   .attr('fill', 'black')


				    svg4.append('text')
				    	.attr('class', 'Rank legend')
				    	.attr('x', width + 51)
				    	.attr('y', height - 15)
				    	.attr('fill', 'white')
				    	.text('rank')


				    svg4.append('text')
				    	.attr('class', 'Rank legend')
				    	.attr('x', width + 22)
				    	.attr('y', height + 20)
				    	.attr('fill', 'black')
				    	.text('BoardGameGeek Rank')

					//Add legends 
					svg4.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width + 5)
						.attr('y', function(d){return yScale(d3.max(data_dict['Catan_count']))})
						.attr('fill', colors[0])
						.text('Catan')

					svg4.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Dominion_count']))})
						.attr('fill', colors[1])
						.text('Dominion')


					svg4.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Codenames_count']))})
						.attr('fill', colors[2])
						.text('Codenames')


					svg4.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Teraforming_Mars']))})
						.attr('fill', colors[3])
						.text('Terraforming Mars')


					svg4.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Gloomhaven_count']))})
						.attr('fill', colors[4])
						.text('Gloomhaven')

					svg4.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Magic_count']))})
						.attr('fill', colors[5])
						.text('Magic: The Gathering')

					svg4.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Dixit_count']))})
						.attr('fill', colors[6])
						.text('Dixit')

					svg4.append('g')
						.selectAll('line')
						.data(data)
						.enter()
						.append('text')
						.attr('x', width+10)
						.attr('y', function(d){return yScale(d3.max(data_dict['Monopoly_count']))})
						.attr('fill', colors[7])
						.text('Monopoly')

					// Add the text label for axes     
					svg4.append("g")
					   .append('text')
					   .attr('id', 'x_axis_label')
					   .attr("x", width/2)
					   .attr('y', height+ 50)
					   .attr("text-anchor", "middle")
					   .attr("stroke", "black")
					   .text("Month");

    
				   svg4.append("g")
				     .append('text')
				     .attr('id', 'y_axis_label')
				     .attr("transform", "rotate(-90)")
				     .attr("x", -height/2)
				     .attr("y", 25)
				     .attr("dy", "-5.1em")
				     .attr("text-anchor", "end")
				     .attr("stroke", "black")
				     .text("Number of Ratings");

					//Chart Title 
					svg4.append('g')
					   .append('text')
					   .attr('id', 'title')
					   .attr("x", width/4)
					   .attr('y', height-355)
					   .attr("stroke", "black")
					   .text("Number of Ratings 2016 - 2020 (Log Scale)");

					//GT Username
					svg4.append('g')
					   .append('text')
					   .attr('id', 'credit')
					   .attr("x", width+100)
					   .attr('y', height+ 50)
					   .attr("text-anchor", "right")
					   .attr("stroke", "black")
					   .text("eperalta6");


					
				})
	</script>

	<div class = "pagebreak"> </div>


</body>
	






